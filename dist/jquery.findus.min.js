/*! jquery-findus 14-02-2015 */
!function(a){function b(b,c){function g(){w.resize()}function h(){o=q.getCenter()}function i(){if(c.content||c.address){var a=s.getMap();a?s.close():s.open(q,r)}}function j(){s.close()}function k(){var b=a.extend(!0,{},c.marker,{map:q,position:o}),e=r&&r.getPosition()||null;r?r.setOptions(b):(r=new d.maps.Marker(b),d.maps.event.addListener(r,"click",i)),l(),clearTimeout(t),!c.autoShow||s.getMap()||e&&(e.lat()===o.lat()||e.lng()===o.lng())||(t=setTimeout(function(){s.open(q,r),r.setAnimation(null)},r.getAnimation()?700:350))}function l(){var b=a.extend(!0,{},c.info,{content:c.content||c.address&&a.trim(c.address).split(",").join("<br/>")||function(a,b){return f[a+","+b]?f[a+","+b][0].formatted_address.split(",").join("<br/>"):void 0}(c.latitude,c.longitude)});s?s.setOptions(b):s=new d.maps.InfoWindow(b)}function m(){if(o){var e=a.extend(!0,{},c.map,{center:o});q?q.setOptions(e):(n(),q=new d.maps.Map(b,e),d.maps.event.addListener(q,"click",j)),d.maps.event.addListenerOnce(q,"tilesloaded",function(){k()})}}function n(){"function"==typeof c.minHeight?c.minHeight.call(this,c):c.minHeight,"function"==typeof c.maxHeight?c.maxHeight.call(this,c):c.maxHeight;a(b).css("min-height",c.minHeight||""),a(b).css("max-height",c.maxHeight||"")}if(!d||!d.maps)return void console.warn("Google maps not found");var o,p,q,r,s,t,u,v={bindResize:!0,minWidth:0,minHeight:420,address:"",content:"",map:{zoom:15,mapTypeId:d.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0},marker:{},info:{},autoShow:!0},w=this,x=a(b);this.refresh=function(){if(u=u||new d.maps.Geocoder,c.latitude&&c.longitude)o=new d.maps.LatLng(c.latitude,c.longitude),c.content&&c.address?m():u.geocode({latLng:o},function(a,b){b===d.maps.GeocoderStatus.OK?(f[c.latitude+","+c.longitude]=a,m()):console.warn("Geocoder returned with error: ",b)});else if(c.content||c.address){var b=a.map((c.address||c.content&&function(b){return b.match(/<address/)&&a("<div>"+b+"</div>").find("address").html()||b}(c.content)).split(/<(?:.|\n)*?>/gm),function(b){var c=a.trim(b);return c||null}).join(",");e[b]?(o=e[b][0].geometry.location,m()):u.geocode({address:b},function(a,c){c===d.maps.GeocoderStatus.OK?(e[b]=a,o=e[b][0].geometry.location,m()):console.warn("Geocoder returned with error '"+c+"' for string '"+b+"'")})}this.resize()},this.setOptions=function(b){c=a.extend({},c,b),this.refresh()},this.getOptions=function(){return a.extend({},c)},this.resize=function(){var a=this.getOptions();(a.latitude&&a.longitude||a.address||a.content)&&n(),q&&(d.maps.event.clearListeners(q,"center_changed"),window.clearTimeout(p),p=window.setTimeout(function(){q.setCenter(o),d.maps.event.addListener(q,"center_changed",h)},0),d.maps.event.trigger(q,"resize"))},c=a.extend(!0,{},v,c,{content:x.html().replace(/^\s+|\s+$/g,"")},x.data()),x.html(""),a(window).off("resize",g),c.bindResize&&a(window).on("resize",g),this.refresh()}var c="findus",d=window.google,e={},f={};jQuery.fn[c]=function(d){return this.each(function(){var e=a(this).data(c);return e?e.setOptions(d):e=a(this).data(c,new b(this,d)),a(this)})},a(document).on("show.bs.tab show.bs.modal show.bs.collapse",function(b){var d,e=a(b.target);e=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||b.target),e.css("display","block").find("*").map(function(){return a(this).data(c)||null}).each(function(){this.resize()}).css("display","")})}(jQuery);