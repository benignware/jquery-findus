/*! jquery-findus 24-10-2016 */
!function(a){function b(d,e){function f(a){v.resize()}function g(a){n=p.getCenter()}function h(a){if((u.content||u.address)&&r){var b=r.getMap();b?r.close():r.open(p,q)}}function i(){r&&r.close()}function j(){var b=a.extend(!0,{},u.marker,{map:p,position:n}),c=q&&q.getPosition()||null;q?q.setOptions(b):(q=new google.maps.Marker(b),google.maps.event.addListener(q,"click",h)),k(),r&&(clearTimeout(s),u.info&&u.autoShow&&!r.getMap()&&(!c||c.lat()!==n.lat()&&c.lng()!==n.lng())&&(s=setTimeout(function(){r.open(p,q),a(d).find('img[src*="gstatic.com/"], img[src*="googleapis.com/"]').css("max-width","none"),q.setAnimation(null)},q.getAnimation()?700:350)))}function k(){var b;u.info?(b=a.extend(!0,{},u.info,{content:u.content||(u.address||y&&y.formatted_address).split(/,|\n|<\s*br\s*\/?\s*>/).join("<br/>")}),r?r.setOptions(b):r=new google.maps.InfoWindow(b)):r&&infowindow.close()}function l(){if(n){var b=a.extend(!0,{},u.map||t.map,{center:n});p?p.setOptions(b):(m(),p=new google.maps.Map(d,b),google.maps.event.addListener(p,"click",i)),google.maps.event.addListenerOnce(p,"tilesloaded",function(){j()})}}function m(){"function"==typeof u.minHeight?u.minHeight.call(this,e):u.minHeight,"function"==typeof u.maxHeight?u.maxHeight.call(this,e):u.maxHeight;a(d).css("min-height",u.minHeight||""),a(d).css("max-height",u.maxHeight||""),a(d).css("color","black")}if(!google||!google.maps)return void console.error("jquery-findus needs Google Maps API");var n,o,p,q,r,s,t={address:"",autoShow:!0,bindResize:!0,content:"",info:{},map:{zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0},marker:{},minWidth:0,minHeight:440},u={},v=this,w=a(d),x=w.html().replace(/^\s+|\s+$/g,""),y=null;this.update=function(c){a.extend(u,c),google.maps.Geocoder&&google.maps.LatLng&&(u.latitude&&u.longitude?(n=new google.maps.LatLng(u.latitude,u.longitude),u.content||u.address?l():b.reverseGeocode(u.latitude,u.longitude,function(a,b){y=a[0],b===google.maps.GeocoderStatus.OK?l():console.warn("Geocoder returned with error: ",b)})):(u.content||u.address)&&b.geocode(u.address||u.content,function(a,b){y=a[0],b===google.maps.GeocoderStatus.OK?(n=a[0].geometry.location,l()):console.warn("Geocoder returned with error: ",b)}),this.resize())},this.setOptions=function(a){this.update(a)},this.getOptions=function(){return a.extend({},u)},this.resize=function(){(u.latitude&&u.longitude||u.address||u.content)&&m(),p&&(google.maps.event.clearListeners(p,"center_changed"),window.clearTimeout(o),o=window.setTimeout(function(){p.setCenter(n),google.maps.event.addListener(p,"center_changed",g)},0),google.maps.event.trigger(p,"resize"))},w.html("");var u=a.extend(!0,{},t,e,{content:x},c(w.data(),["map","marker","info"]));this.update(u),this.resize(),a(window).off("resize",f),u.bindResize&&a(window).on("resize",f)}var c=function(a,b){var c,d,e,f;for(c in a)for(d=0;d<b.length;d++)e=b[d],c.substring(0,e.length)===e&&c.length>e.length&&(f=c.substring(e.length,e.length+1).toLowerCase()+c.substring(e.length+1),a[e]=a[e]||{},a[e][f]=a[c],delete a[c]);return a},d=function(){function a(a){return a&&"string"==typeof a&&(a=a.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,""),a=a.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),b.innerHTML=a,a=b.textContent,b.textContent=""),a}var b=document.createElement("div");return a}();b.geocode=function(){var b=null,c={},e={},f=function(a,d){var e=c[a];return e?void d(e.results,e.status):(b=b||new google.maps.Geocoder,void b.geocode({address:a},function(b,e){c[a]={results:b,status:e},d(e===google.maps.GeocoderStatus.OK&&b,e)}))};return function(b,g){var h=e[b]||function(b){return b=b.match(/<address/)&&a("<div>"+b+"</div>").find("address").html().trim()||b,b=d(b),b=b.split(/<(?:.|\n)*?>|\n+/gm).map(function(a){return a.trim()}).filter(function(a){return a}).join(", ")}(b);f(h,function(a,b){if(a)return void g(a,b);var d=h.split(/(?:\n|,|<br\/?>)+/),e={};d.forEach(function(a){f(a,function(b,i){e[a]=i===google.maps.GeocoderStatus.OK&&!b[0].partial_match&&b[0]||!1,Object.keys(e).length===d.length&&(a=d.filter(function(a){return e[a]!==!1}).join(", "),f(a,function(a,b){c[h]={results:a,status:b},g(a,b)}))})})})}}(),b.reverseGeocode=function(){var a=null,b={};return function(c,d,e){var f=c+","+d,g=new google.maps.LatLng(c,d),h=b[f];return a=a||new google.maps.Geocoder,h?void e(h.results,h.status):void a.geocode({latLng:g},function(a,c){b[f]={results:a,status:c},e(a,c)})}}(),a.fn.findus=function(){var c=[].slice.call(arguments);return this.each(function(){return function(d){var e;return a(this).data("findus",d=d?"object"==typeof c[0]&&d.update(c[0])&&d||d:new b(this,c[0])),e="string"==typeof c[0]&&"function"==typeof d[c[0]]?d[c[0]].apply(d,c.slice(1)):e,"undefined"!=typeof e?e:this}.call(this,a(this).data("findus"))})},a(document).on("show.bs.tab show.bs.modal show.bs.collapse",function(b){var c,d=a(b.target);d=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")||b.target),d.css("display","block").find("*").map(function(){return a(this).data("findus")||null}).each(function(){this.resize()}),d.css("display","")})}(jQuery);